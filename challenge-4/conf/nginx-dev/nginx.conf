server {
    listen 80;

    # Block direct access to admin paths
    location ~* ^/admin {
        return 403 "Forbidden: Admin area blocked by the reverse proxy.";
    }

    location / {
        proxy_pass http://web:5000;

        # ðŸ’¡ LET THE ORIGINAL HEADER THROUGH
        proxy_set_header X-Forwarded-For $http_x_forwarded_for;
        proxy_set_header X-Original-URL $http_x_original_url;

        # ðŸ§¼ Optional: keep other headers clean
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
